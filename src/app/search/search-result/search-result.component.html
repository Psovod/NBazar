<div class="flex gap-2 w-full">
  <!-- Left Side: Map Container -->
  <div class="flex-1 max-h-screen">
    <app-maps></app-maps>
  </div>

  <div class="flex-1 rounded-lg bg-white shadow-md max-h-screen overflow-scroll min-h-screen">
    <div class="sticky top-0 p-4 bg-gray-50 z-10 border-b border-gray-200">
      <h3 class="font-semibold text-2xl">
        Výsledek vyhlednávání pro
        <span class="capitalize">{{ query }}</span>
      </h3>
    </div>
    <div class="p-4">
      <div class="grid grid-cols-1 gap-4">
        @for (result of maps.realityList$ | async; track $index) {
        <div class="bg-gray-50 hover:bg-gray-100 rounded-lg transition duration-150 ease-in-out p-4">
          <div
            class="grid grid-cols-3 gap-2"
            (click)="viewProperty(result.uuid)">
            @for (photo of result.images.slice(0, 3); track $index) {
            <img
              [ngSrc]="photo | imagePath"
              [width]="300"
              [height]="300"
              [alt]="photo"
              [priority]="true"
              class="rounded-lg w-full object-cover h-32 hover:opacity-75 cursor-pointer"
              onerror="this.onerror=null; this.src='https://via.placeholder.com/200x150';" />
            }
          </div>

          <div class="pt-4 text-xl flex flex-col">
            <span
              class="font-bold text-red-800 cursor-pointer hover:underline"
              (click)="viewProperty(result.uuid)">
              {{ result.title }}
            </span>
            <span class="text-gray-500">Location: {{ result.location | realityLocation }}</span>
            <span class="text-gray-700">
              {{ result.price | currency }}
            </span>
            <span class="text-gray-700">
              {{ result.user.surname }} {{ result.user.name }} -
              <span class="text-red-600">{{ result.user.email }}</span>
            </span>
          </div>
        </div>
        }
      </div>

      <custom-pagination
        [pagination]="pagination"
        (onPageChange)="onPageChange($event)"></custom-pagination>
    </div>
  </div>
</div>
